<UserControl x:Class="PuntoDeVenta.Views.ReportesView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        
        <!-- ========== HEADER ========== -->
        <Grid Grid.Row="0" Margin="0,0,0,20">
            <StackPanel>
                <TextBlock Text="ðŸ“ˆ Reportes" 
                           FontSize="28" 
                           FontWeight="Bold"
                           Foreground="{StaticResource TextPrimaryBrush}"/>
                <TextBlock Text="AnÃ¡lisis y estadÃ­sticas del negocio" 
                           FontSize="14" 
                           Foreground="{StaticResource TextMutedBrush}"
                           Margin="0,5,0,0"/>
            </StackPanel>
            
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <Button Content="ðŸ“¤ Exportar Ventas" 
                        Style="{StaticResource AccentButton}"
                        Margin="0,0,10,0"
                        Click="ExportarVentas_Click"/>
                <Button Content="ðŸ“¤ Exportar Compras" 
                        Style="{StaticResource PrimaryButton}"
                        Margin="0,0,10,0"
                        Click="ExportarCompras_Click"/>
                <Button Content="ðŸ“¤ Exportar Inventario" 
                        Style="{StaticResource PrimaryButton}"
                        Click="ExportarInventario_Click"/>
            </StackPanel>
        </Grid>
        
        <!-- ========== FILTROS ========== -->
        <Border Grid.Row="1" Style="{StaticResource Card}" Margin="0,0,0,20" Padding="15">
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="PerÃ­odo:" 
                           VerticalAlignment="Center"
                           Foreground="{StaticResource TextSecondaryBrush}"
                           Margin="0,0,10,0"/>
                <ComboBox x:Name="cmbPeriodo" Width="150" Margin="0,0,20,0"
                          Style="{StaticResource ModernComboBox}">
                    <ComboBoxItem Content="Hoy" IsSelected="True"/>
                    <ComboBoxItem Content="Esta semana"/>
                    <ComboBoxItem Content="Este mes"/>
                    <ComboBoxItem Content="Ãšltimo mes"/>
                    <ComboBoxItem Content="Todo"/>
                </ComboBox>
                <Button Content="ðŸ”„ Generar Reporte" 
                        Style="{StaticResource PrimaryButton}"
                        Click="GenerarReporte_Click"/>
            </StackPanel>
        </Border>
        
        <!-- ========== TARJETAS DE RESUMEN ========== -->
        <Grid Grid.Row="2" Margin="0,0,0,20">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            
            <!-- Ventas Totales -->
            <Border Grid.Column="0" Style="{StaticResource Card}" Margin="0,0,10,0">
                <StackPanel>
                    <TextBlock Text="ðŸ’° VENTAS TOTALES" 
                               FontSize="12" FontWeight="SemiBold"
                               Foreground="{StaticResource TextMutedBrush}"/>
                    <TextBlock x:Name="txtVentasUsd" Text="$ 0.00" 
                               FontSize="28" FontWeight="Bold"
                               Foreground="{StaticResource AccentBrush}"
                               Margin="0,8,0,0"/>
                    <TextBlock x:Name="txtVentasBs" Text="Bs 0.00" 
                               FontSize="14"
                               Foreground="{StaticResource TextSecondaryBrush}"/>
                </StackPanel>
            </Border>
            
            <!-- Transacciones -->
            <Border Grid.Column="1" Style="{StaticResource Card}" Margin="10,0">
                <StackPanel>
                    <TextBlock Text="ðŸ§¾ TRANSACCIONES" 
                               FontSize="12" FontWeight="SemiBold"
                               Foreground="{StaticResource TextMutedBrush}"/>
                    <TextBlock x:Name="txtTransacciones" Text="0" 
                               FontSize="28" FontWeight="Bold"
                               Foreground="{StaticResource PrimaryBrush}"
                               Margin="0,8,0,0"/>
                    <TextBlock Text="facturas" 
                               FontSize="14"
                               Foreground="{StaticResource TextSecondaryBrush}"/>
                </StackPanel>
            </Border>
            
            <!-- Promedio por Venta -->
            <Border Grid.Column="2" Style="{StaticResource Card}" Margin="10,0">
                <StackPanel>
                    <TextBlock Text="ðŸ“Š PROMEDIO/VENTA" 
                               FontSize="12" FontWeight="SemiBold"
                               Foreground="{StaticResource TextMutedBrush}"/>
                    <TextBlock x:Name="txtPromedio" Text="$ 0.00" 
                               FontSize="28" FontWeight="Bold"
                               Foreground="#f39c12"
                               Margin="0,8,0,0"/>
                    <TextBlock x:Name="txtPromedioBs" Text="Bs 0.00" 
                               FontSize="14"
                               Foreground="{StaticResource TextSecondaryBrush}"/>
                </StackPanel>
            </Border>
            
            <!-- Productos Vendidos -->
            <Border Grid.Column="3" Style="{StaticResource Card}" Margin="10,0,0,0">
                <StackPanel>
                    <TextBlock Text="ðŸ“¦ PRODUCTOS" 
                               FontSize="12" FontWeight="SemiBold"
                               Foreground="{StaticResource TextMutedBrush}"/>
                    <TextBlock x:Name="txtProductosVendidos" Text="0" 
                               FontSize="28" FontWeight="Bold"
                               Foreground="#9b59b6"
                               Margin="0,8,0,0"/>
                    <TextBlock Text="unidades vendidas" 
                               FontSize="14"
                               Foreground="{StaticResource TextSecondaryBrush}"/>
                </StackPanel>
            </Border>
        </Grid>
        
        <!-- ========== DETALLE DE VENTAS ========== -->
        <Border Grid.Row="3" Style="{StaticResource Card}">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                
                <TextBlock Grid.Row="0" Text="ðŸ“‹ DETALLE DE VENTAS" 
                           FontSize="16" FontWeight="SemiBold"
                           Foreground="{StaticResource TextPrimaryBrush}"
                           Margin="0,0,0,15"/>
                
                <DataGrid x:Name="dgVentas" Grid.Row="1"
                          AutoGenerateColumns="False"
                          Background="Transparent"
                          BorderThickness="0"
                          RowBackground="{StaticResource BackgroundTertiaryBrush}"
                          AlternatingRowBackground="{StaticResource BackgroundSecondaryBrush}"
                          Foreground="{StaticResource TextPrimaryBrush}"
                          GridLinesVisibility="None"
                          HeadersVisibility="Column"
                          CanUserAddRows="False"
                          IsReadOnly="True">
                    
                    <DataGrid.ColumnHeaderStyle>
                        <Style TargetType="DataGridColumnHeader">
                            <Setter Property="Background" Value="{StaticResource BackgroundSecondaryBrush}"/>
                            <Setter Property="Foreground" Value="{StaticResource TextSecondaryBrush}"/>
                            <Setter Property="Padding" Value="12,10"/>
                            <Setter Property="FontWeight" Value="SemiBold"/>
                            <Setter Property="BorderThickness" Value="0"/>
                        </Style>
                    </DataGrid.ColumnHeaderStyle>
                    
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="NÂº FACTURA" Binding="{Binding NumeroFactura}" Width="120"/>
                        <DataGridTextColumn Header="FECHA" Binding="{Binding Fecha}" Width="100"/>
                        <DataGridTextColumn Header="CLIENTE" Binding="{Binding Cliente}" Width="*"/>
                        <DataGridTextColumn Header="PRODUCTOS" Binding="{Binding CantidadProductos}" Width="100"/>
                        <DataGridTextColumn Header="TOTAL USD" Binding="{Binding TotalUsdFormateado}" Width="100"/>
                        <DataGridTextColumn Header="TOTAL Bs" Binding="{Binding TotalBsFormateado}" Width="120"/>
                    </DataGrid.Columns>
                </DataGrid>
            </Grid>
        </Border>
    </Grid>
</UserControl>
